---
layout: post
title: "使用Charles抓包工具抓取手机http和https教程"
date: 2019-03-26
excerpt: "十六说：配置Charles抓取手机http和https，这一篇文档就够了。"
tags: Charles
feature: http://poykjx8e5.bkt.clouddn.com/PinkCloud.png
comments: true
---
# 下载抓包工具Charles
![Charles](http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_20-51-30.png)

&emsp;1.可以去Charles官网进行下载，根据自己的操作系统下载对应的版本，然后进行安装，安装后打开Charles工具。

<center><a href="http://www.charlesproxy.com"><b>十六的传送门</b></a></center>

&emsp;2.Charles是收费软件，需要破解，用下载下来的charles.jar替换原来的jar包。如果不破解的话也是可以使用的，只不过每30分钟就会弹出提示，然后关闭软件。

<center><a href="https://pan.baidu.com/s/1tiJoOJhG7cepUbYynXuJPw"><b>十六的传送门</b></a></center>
<center>密码：re1n</center>

# 配置Charles根证书
&emsp;1.打开Charles，点击`Help`点击`SSL Proxying`再点击`Install Charies Root Certificate`。

![Charles根证书配置](http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_19-41-41.png)

&emsp;2.完成上述操作后会进入如下页面，请按照图片进行操作。

{% capture images %} http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_19-42-42%20%282%29.png http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_19-48-49.png {% endcapture %} {% include gallery images=images caption="如果图片太小可以点击查看哦" cols=2 %} 
{% capture images %} http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_19-51-13.png http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_19-56-03.png {% endcapture %} {% include gallery images=images caption="如果图片太小可以点击查看哦" cols=2 %} 

# 配置Charles抓取http请求
&emsp;1.配置的前提是确保手机和电脑在同一个局域网下。

&emsp;2.点击`proxy`勾选上`Windows Proxy`。再进入到同是`proxy`下的`Proxy Settings...`记住端口号，并勾选`Enable transparent HTTP proxying`。当然你也可以自己设置口号。
{% capture images %} http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_00-14-46.png http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_00-18-48.png {% endcapture %} {% include gallery images=images caption="如果图片太小可以点击查看哦" cols=2 %} 

&emsp;3.查看当前电脑ip地址，在cmd中输入`ipconfig`，例如：我的ip地址是192.168.6.165

![cmd查找IP地址图片](http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_16-10-36.png)

&emsp;4.根据ip地址和端口号在手机上设置代理。在手机的设置中点击你所连接的无线局域网，找到配置代理，更改为手动代理，填写ip地址和端口号。

{% capture images %} http://poykjx8e5.bkt.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190327173651%20%282%29.png http://poykjx8e5.bkt.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190327162150%EF%BC%882%EF%BC%89.png http://poykjx8e5.bkt.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190327162154%20%282%29.png {% endcapture %} {% include gallery images=images caption="如果图片太小可以点击查看哦" cols=3 %} 

&emsp;5.到这里你就可以抓取http请求了的数据了，快去试一下吧！

![Charles抓取http](http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_16-46-05.png)

# 配置Charles抓取https请求
&emsp;1.设置Charles ssl代理。点击`Proxy`再进入到`SSL Proxy Settings...`。将`Enable SSL Proxying`复选框勾选上。并在下方添加你想要设置代理的域名，默认端口为443。当然你也可以用\*代替域名。

{% capture images %} http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_17-11-07.png http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_17-14-39.png {% endcapture %} {% include gallery images=images caption="如果图片太小可以点击查看哦" cols=2 %} 

&emsp;2.在移动设备上配置证书。点击`Help`点击`SSL Proxying`再点击`Install Charles Root Certificate on a Mobile Device or Remote Browser`。完成后换弹出一个带有电脑IP，端口号，以及移动设备下载证书的网址。用浏览器打开该网站会有自动弹窗弹出让你下载移动设备证书并安装证书，若没有或者下载的证书不正确，换一换浏览器试试，建议使用手机自带的浏览器。

{% capture images %} http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_20-19-21.png http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_20-22-05.png {% endcapture %} {% include gallery images=images caption="如果图片太小可以点击查看哦" cols=2 %} 

&emsp;Android手机下载后会自动安装。iPhone IOS10以上，需要在设置——通用——关于本机——证书信任设置中，开启对证书的信任。连接后会自动弹出对话框问你是否需要连接，点击Allow之后，就可以开始抓包了。

![开启证书信任](http://poykjx8e5.bkt.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190327204331%20%282%29.png)
{% capture images %}  http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_20-51-08.png http://poykjx8e5.bkt.clouddn.com/Snipaste_2019-03-27_20-55-24.png {% endcapture %} {% include gallery images=images caption="如果图片太小可以点击查看哦" cols=2 %} 






